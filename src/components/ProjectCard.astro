---
import { getCategoryStyle } from '../lib/constants';

const { project, lang = 'fr' } = Astro.props;

const category = getCategoryStyle(project.category, lang);
---

<article class="relative rounded-2xl bg-white/60 dark:bg-gray-800/60 border border-gray-200/50 dark:border-gray-700/30 backdrop-blur-sm p-5 sm:p-7 max-w-3xl mx-auto card-hover gold-border-glow">

  {category && (
    <div class="absolute top-4 sm:top-5 right-4 sm:right-5 z-10">
      <span class={`flex items-center gap-1.5 text-xs font-semibold px-2.5 sm:px-3 py-1 rounded-full shadow-sm ${category.classes}`}>
        {category.label}
      </span>
    </div>
  )}

  {project.image && (
    <div class="relative overflow-hidden rounded-xl mb-4 sm:mb-5">
      <img
        src={project.image}
        alt={`Screenshot du projet ${project.title}`}
        loading="lazy"
        decoding="async"
        width="800"
        height="208"
        class="w-full h-40 sm:h-52 object-cover transition-transform duration-700 ease-out group-hover:scale-105"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>

      {project.tag && (
        <div class="absolute top-2 left-2 flex flex-wrap gap-1.5">
          {project.tag.map((tag: string) => (
            <span
              class={`bg-gray-900/80 backdrop-blur-sm text-white text-xs font-semibold px-2.5 sm:px-3 py-1 rounded-full tag-${tag.toLowerCase().replace(/\s+/g, '-').replace(/[àâ]/g, 'a')}`}
            >
              {tag}
            </span>
          ))}
        </div>
      )}
    </div>
  )}

  <h2 class="font-display text-xl sm:text-2xl md:text-3xl font-bold text-charcoal dark:text-white mb-2 pr-16 sm:pr-20 group-hover:text-gold transition-colors duration-300">
    {project.title}
  </h2>

  <p class="font-body text-gray-600 dark:text-gray-400 text-sm sm:text-base leading-relaxed mb-4">
    {project.description}
  </p>

  <div class="flex flex-wrap gap-1.5 sm:gap-2">
    {project.stack?.map((tech: string) => (
      <span class="bg-amber-50/80 dark:bg-gray-700/50 text-amber-900 dark:text-gray-300 text-xs sm:text-sm font-medium font-body px-2.5 sm:px-3 py-1 rounded-full border border-amber-200/50 dark:border-gray-600/30">
        {tech}
      </span>
    ))}
  </div>

  <div class="mt-4 flex items-center gap-2 text-sm font-body font-medium text-gold opacity-50 group-hover:opacity-100 transition-opacity duration-300">
    <span>{lang === 'fr' ? 'Voir le projet' : 'View project'}</span>
    <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 8l4 4m0 0l-4 4m4-4H3" stroke-linecap="round" stroke-linejoin="round"/></svg>
  </div>
</article>
