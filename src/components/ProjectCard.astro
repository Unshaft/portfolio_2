---
const { project } = Astro.props;

const categoryStyles = {
  pro: { label: 'Pro', color: 'bg-gold' },
  perso: { label: 'Perso', color: 'bg-[#A1C298]' },
  study: { label: 'Ã‰tude', color: 'bg-[#5CA0D3]' }
};

const category = categoryStyles[project.category];
---

<article class="relative bg-white dark:bg-gray-800 rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6 mb-4 sm:mb-8 max-w-3xl mx-auto transform transition duration-300 group-hover:scale-[1.02] group-hover:shadow-xl opacity-0 animate-fadein">

  {category && (
    <div class="absolute top-3 sm:top-4 right-3 sm:right-4 z-10">
      <span class={`flex items-center gap-1 text-white text-xs font-semibold px-2 sm:px-3 py-1 rounded-full shadow-sm ${category.color}`}>
        {category.label}
        <svg class="w-3 h-3 sm:w-4 sm:h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2L15 8l6 1-4.5 4 1 6-5.5-3-5.5 3 1-6L3 9l6-1 3-6z"/>
        </svg>
      </span>
    </div>
  )}

  {project.image && (
    <div class="relative overflow-hidden rounded-lg sm:rounded-xl mb-3 sm:mb-5 shadow-md">
      <img
        src={project.image}
        alt={project.title}
        loading="lazy"
        class="w-full h-40 sm:h-52 object-cover transition-transform duration-500 ease-in-out group-hover:scale-105"
      />

      {project.tag && project.tag.map((tag, i) => (
        <span
          class={`absolute top-2 left-2 bg-gray-800 text-white text-xs font-semibold px-2 sm:px-3 py-1 rounded-full shadow-sm tag-${tag.toLowerCase().replace(' ', '-')}`}
          style={`margin-left: ${i * 4}rem`}
        >
          {tag}
        </span>
      ))}
    </div>
  )}

  <h2 class="text-xl sm:text-2xl md:text-3xl font-bold text-charcoal dark:text-white mb-2 pr-16 sm:pr-20">
    {project.title}
  </h2>

  <p class="text-gray-600 dark:text-gray-400 text-sm sm:text-base leading-relaxed mb-3 sm:mb-4">
    {project.description}
  </p>

  <div class="flex flex-wrap gap-1.5 sm:gap-2">
    {project.stack?.map((tech: string) => (
      <span class="bg-slate dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full shadow-sm">
        {tech}
      </span>
    ))}
  </div>
</article>
