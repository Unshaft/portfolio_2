---
import BaseLayout from '../../layouts/BaseLayout.astro';

const FORMSPREE_ID = "meeeoynr";
---

<BaseLayout lang="fr" altLangHref="/en/contact" title="Contact - Killian Perzo" description="Contactez-moi pour discuter de vos projets data, collaborations ou opportunites.">
  <section class="max-w-xl mx-auto py-8 sm:py-16 px-4 sm:px-0">
    <div class="mb-8 sm:mb-10">
      <p class="font-body text-sm font-medium tracking-widest uppercase text-gold mb-3">Contact</p>
      <h1 class="font-display text-3xl sm:text-4xl font-extrabold text-charcoal dark:text-white">
        Me <span class="gold-accent">contacter</span>
      </h1>
      <p class="font-body text-gray-600 dark:text-gray-400 mt-3">
        Envie de discuter d'un projet, d'une collaboration ou simplement echanger ? Contactez-moi ci-dessous.
      </p>
    </div>

    <form
      action={`https://formspree.io/f/${FORMSPREE_ID}`}
      method="POST"
      class="space-y-5"
      id="contact-form"
    >
      <div>
        <label for="name" class="block text-sm font-body font-medium text-charcoal dark:text-gray-200 mb-1.5">Nom</label>
        <input
          type="text"
          name="name"
          id="name"
          placeholder="Votre nom"
          required
          autocomplete="name"
          class="w-full bg-white/60 dark:bg-gray-800/40 border border-gray-200/50 dark:border-gray-700/30 backdrop-blur-sm text-charcoal dark:text-white px-4 py-3 rounded-xl focus:ring-2 focus:ring-gold/50 focus:border-gold transition-all font-body text-base outline-none"
        />
      </div>

      <div>
        <label for="email" class="block text-sm font-body font-medium text-charcoal dark:text-gray-200 mb-1.5">Email</label>
        <input
          type="email"
          name="email"
          id="email"
          placeholder="Votre email"
          required
          autocomplete="email"
          class="w-full bg-white/60 dark:bg-gray-800/40 border border-gray-200/50 dark:border-gray-700/30 backdrop-blur-sm text-charcoal dark:text-white px-4 py-3 rounded-xl focus:ring-2 focus:ring-gold/50 focus:border-gold transition-all font-body text-base outline-none"
        />
      </div>

      <div>
        <label for="message" class="block text-sm font-body font-medium text-charcoal dark:text-gray-200 mb-1.5">Message</label>
        <textarea
          name="message"
          id="message"
          placeholder="Votre message"
          rows="5"
          required
          class="w-full bg-white/60 dark:bg-gray-800/40 border border-gray-200/50 dark:border-gray-700/30 backdrop-blur-sm text-charcoal dark:text-white px-4 py-3 rounded-xl focus:ring-2 focus:ring-gold/50 focus:border-gold transition-all font-body text-base resize-none outline-none"
        ></textarea>
      </div>

      <!-- Honeypot anti-spam -->
      <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" />

      <button
        type="submit"
        class="btn-primary w-full sm:w-auto"
      >
        Envoyer
      </button>
    </form>

    <div id="success-message" class="hidden mt-6 p-5 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-700/30 text-emerald-700 dark:text-emerald-300 rounded-2xl font-body text-sm sm:text-base" role="alert" aria-live="polite" tabindex="-1">
      Merci pour votre message ! Je vous repondrai dans les plus brefs delais.
    </div>
  </section>

  <script>
    if (window.location.search.includes('success')) {
      document.getElementById('success-message')?.classList.remove('hidden');
      document.getElementById('contact-form')?.classList.add('hidden');
    }
  </script>
</BaseLayout>
