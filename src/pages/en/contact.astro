---
import BaseLayout from '../../layouts/BaseLayout.astro';

const FORMSPREE_ID = "meeeoynr";
---

<BaseLayout lang="en" altLangHref="/fr/contact" title="Contact - Killian Perzo" description="Contact me to discuss your data projects, collaborations or opportunities.">
  <section class="max-w-xl mx-auto py-8 sm:py-16 px-4 sm:px-0">
    <div class="mb-8 sm:mb-10">
      <p class="font-body text-sm font-medium tracking-widest uppercase text-gold mb-3">Contact</p>
      <h1 class="font-display text-3xl sm:text-4xl font-extrabold text-charcoal dark:text-white">
        Get in <span class="gold-accent">touch</span>
      </h1>
      <p class="font-body text-gray-600 dark:text-gray-400 mt-3">
        Want to discuss a project, collaborate, or just connect? Feel free to reach out below.
      </p>
    </div>

    <form
      action={`https://formspree.io/f/${FORMSPREE_ID}`}
      method="POST"
      class="space-y-5"
      id="contact-form"
    >
      <div>
        <label for="name" class="block text-sm font-body font-medium text-charcoal dark:text-gray-200 mb-1.5">Name</label>
        <input
          type="text"
          name="name"
          id="name"
          placeholder="Your name"
          required
          autocomplete="name"
          class="w-full bg-white/60 dark:bg-gray-800/40 border border-gray-200/50 dark:border-gray-700/30 backdrop-blur-sm text-charcoal dark:text-white px-4 py-3 rounded-xl focus:ring-2 focus:ring-gold/50 focus:border-gold transition-all font-body text-base outline-none"
        />
      </div>

      <div>
        <label for="email" class="block text-sm font-body font-medium text-charcoal dark:text-gray-200 mb-1.5">Email</label>
        <input
          type="email"
          name="email"
          id="email"
          placeholder="Your email"
          required
          autocomplete="email"
          class="w-full bg-white/60 dark:bg-gray-800/40 border border-gray-200/50 dark:border-gray-700/30 backdrop-blur-sm text-charcoal dark:text-white px-4 py-3 rounded-xl focus:ring-2 focus:ring-gold/50 focus:border-gold transition-all font-body text-base outline-none"
        />
      </div>

      <div>
        <label for="message" class="block text-sm font-body font-medium text-charcoal dark:text-gray-200 mb-1.5">Message</label>
        <textarea
          name="message"
          id="message"
          placeholder="Your message"
          rows="5"
          required
          class="w-full bg-white/60 dark:bg-gray-800/40 border border-gray-200/50 dark:border-gray-700/30 backdrop-blur-sm text-charcoal dark:text-white px-4 py-3 rounded-xl focus:ring-2 focus:ring-gold/50 focus:border-gold transition-all font-body text-base resize-none outline-none"
        ></textarea>
      </div>

      <!-- Honeypot anti-spam -->
      <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" />

      <button
        type="submit"
        class="btn-primary w-full sm:w-auto"
      >
        Send
      </button>
    </form>

    <div id="success-message" class="hidden mt-6 p-5 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-700/30 text-emerald-700 dark:text-emerald-300 rounded-2xl font-body text-sm sm:text-base">
      Thank you for your message! I'll get back to you as soon as possible.
    </div>
  </section>

  <script>
    if (window.location.search.includes('success')) {
      document.getElementById('success-message')?.classList.remove('hidden');
      document.getElementById('contact-form')?.classList.add('hidden');
    }
  </script>
</BaseLayout>
