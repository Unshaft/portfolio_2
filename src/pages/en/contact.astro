---
// src/pages/en/contact.astro
import BaseLayout from '../../layouts/BaseLayout.astro';

const FORMSPREE_ID = "meeeoynr";
---

<BaseLayout lang="en" altLangHref="/fr/contact" title="Contact - Killian Perzo" description="Contact me to discuss your data projects, collaborations or opportunities.">
  <section class="max-w-xl mx-auto py-8 sm:py-16 px-4 sm:px-0">
    <h1 class="text-2xl sm:text-4xl font-bold text-charcoal dark:text-white mb-3 sm:mb-4">Contact me</h1>
    <p class="text-gray-700 dark:text-gray-300 mb-4 sm:mb-6 text-sm sm:text-base">
      Want to discuss a project, collaborate, or just connect? Feel free to reach out below.
    </p>

    <form
      action={`https://formspree.io/f/${FORMSPREE_ID}`}
      method="POST"
      class="space-y-4"
      id="contact-form"
    >
      <div>
        <label for="name" class="block text-sm font-medium text-charcoal dark:text-gray-200 mb-1">Name</label>
        <input
          type="text"
          name="name"
          id="name"
          placeholder="Your name"
          required
          autocomplete="name"
          class="w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white px-3 sm:px-4 py-2.5 sm:py-2 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition text-base"
        />
      </div>

      <div>
        <label for="email" class="block text-sm font-medium text-charcoal dark:text-gray-200 mb-1">Email</label>
        <input
          type="email"
          name="email"
          id="email"
          placeholder="Your email"
          required
          autocomplete="email"
          class="w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white px-3 sm:px-4 py-2.5 sm:py-2 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition text-base"
        />
      </div>

      <div>
        <label for="message" class="block text-sm font-medium text-charcoal dark:text-gray-200 mb-1">Message</label>
        <textarea
          name="message"
          id="message"
          placeholder="Your message"
          rows="5"
          required
          class="w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white px-3 sm:px-4 py-2.5 sm:py-2 rounded-lg focus:ring-2 focus:ring-gold focus:border-transparent transition text-base resize-none"
        ></textarea>
      </div>

      <!-- Honeypot anti-spam -->
      <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" />

      <button
        type="submit"
        class="w-full sm:w-auto bg-charcoal dark:bg-gold text-white px-6 py-3 sm:py-2 rounded-lg hover:bg-gold dark:hover:bg-oldgold transition-colors duration-300 font-medium text-base active:scale-95"
      >
        Send
      </button>
    </form>

    <!-- Success message (displayed if redirected with ?success) -->
    <div id="success-message" class="hidden mt-6 p-4 bg-green-100 dark:bg-green-900 border border-green-400 dark:border-green-600 text-green-700 dark:text-green-300 rounded-lg text-sm sm:text-base">
      Thank you for your message! I'll get back to you as soon as possible.
    </div>
  </section>

  <script>
    // Show success message if present in URL
    if (window.location.search.includes('success')) {
      document.getElementById('success-message')?.classList.remove('hidden');
      document.getElementById('contact-form')?.classList.add('hidden');
    }
  </script>
</BaseLayout>
